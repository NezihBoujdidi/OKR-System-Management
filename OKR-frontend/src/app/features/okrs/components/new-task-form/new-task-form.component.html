<form [formGroup]="taskForm" (ngSubmit)="handleSubmit()" class="space-y-6">
  <!-- Title Field -->
  <div class="space-y-1">
    <label for="title" class="block text-sm font-medium text-gray-700 flex items-center gap-1">
      Task Title <span class="text-red-500">*</span>
    </label>
    <input type="text" 
           id="title" 
           formControlName="title"
           class="w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all"
           [ngClass]="{'border-red-300 focus:ring-red-500': taskForm.get('title')?.invalid && taskForm.get('title')?.touched}"
           placeholder="Enter task title">
    <div *ngIf="taskForm.get('title')?.invalid && taskForm.get('title')?.touched" class="text-red-500 text-xs mt-1">
      <span *ngIf="taskForm.get('title')?.errors?.['required']">Title is required</span>
    </div>
  </div>

  <!-- Description Field -->
  <div class="space-y-1">
    <label for="description" class="block text-sm font-medium text-gray-700">
      Description
    </label>
    <textarea id="description" 
              formControlName="description"
              rows="3"
              class="w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all resize-none"
              placeholder="Enter task description"></textarea>
  </div>

  <!-- Date Range -->
  <div class="grid grid-cols-2 gap-6">
    <!-- Start Date -->
    <div class="space-y-1">
      <label for="startedDate" class="block text-sm font-medium text-gray-700 flex items-center gap-1">
        Start Date <span class="text-red-500">*</span>
      </label>
      <input type="date" 
             id="startedDate" 
             formControlName="startedDate"
             class="w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
    </div>

    <!-- End Date -->
    <div class="space-y-1">
      <label for="endDate" class="block text-sm font-medium text-gray-700 flex items-center gap-1">
        End Date <span class="text-red-500">*</span>
      </label>
      <input type="date" 
             id="endDate" 
             formControlName="endDate"
             class="w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
    </div>
  </div>

  <!-- Status and Progress -->
  <div class="grid grid-cols-2 gap-6">
    <!-- Status Field -->
    <div class="space-y-1">
      <label for="status" class="block text-sm font-medium text-gray-700 flex items-center gap-1">
        Status <span class="text-red-500">*</span>
      </label>
      <select id="status" 
              formControlName="status"
              class="w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
        <option [value]="Status.NotStarted">Not Started</option>
        <option [value]="Status.InProgress">In Progress</option>
        <option [value]="Status.Completed">Completed</option>
        <option [value]="Status.Overdue">Overdue</option>
      </select>
    </div>
    
    <!-- Progress Field -->
    <div class="space-y-2">
      <label for="progress" class="block text-sm font-medium text-gray-700 flex items-center justify-between">
        <span>Progress</span>
        <span class="text-primary font-semibold">{{ taskForm.get('progress')?.value || 0 }}%</span>
      </label>
      <input type="range" 
             id="progress" 
             formControlName="progress"
             min="0"
             max="100"
             step="5"
             class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
    </div>
  </div>

  <!-- Priority and Assignee -->
  <div class="grid grid-cols-2 gap-6">
    <!-- Priority Field -->
    <div class="space-y-1">
      <label for="priority" class="block text-sm font-medium text-gray-700 flex items-center gap-1">
        Priority <span class="text-red-500">*</span>
      </label>
      <select id="priority" 
              formControlName="priority"
              class="w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
        <option [value]="Priority.Low">Low</option>
        <option [value]="Priority.Medium">Medium</option>
        <option [value]="Priority.High">High</option>
      </select>
    </div>

    <!-- Assignee Field -->
    <div class="space-y-1">
      <label for="collaboratorId" class="block text-sm font-medium text-gray-700">
        Assignee
      </label>
      <div class="relative">
        <select id="collaboratorId" 
                formControlName="collaboratorId"
                class="w-full px-3 py-2 text-sm text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
          <option value="">Select assignee</option>
          <option *ngFor="let collaborator of collaborators" [value]="collaborator.id">
            {{collaborator.firstName}} {{collaborator.lastName}} {{collaborator.email ? '(' + collaborator.email + ')' : ''}}
          </option>
        </select>
        <div *ngIf="collaborators.length === 0" class="mt-1 text-xs text-gray-400">
          No collaborators available from your organization
        </div>
      </div>
    </div>
  </div>

  <!-- Form Actions -->
  <div class="flex items-center justify-end gap-3 pt-6 border-t border-gray-100">
    <!-- Cancel Button -->
    <button type="button"
            (click)="handleCancel()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 transition-all">
      Cancel
    </button>
    
    <!-- Submit Button -->
    <button type="submit"
            [disabled]="!taskForm.valid || isSubmitting"
            class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
      <svg *ngIf="isSubmitting" class="animate-spin -ml-1 mr-2 h-4 w-4 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      {{ isSubmitting ? (isEdit ? 'Saving...' : 'Creating...') : (isEdit ? 'Save Changes' : 'Create Task') }}
    </button>
  </div>
</form>